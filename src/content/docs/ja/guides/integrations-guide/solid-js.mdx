---
type: integration
title: '@astrojs/solid-js'
description: Astroプロジェクトでコンポーネントサポートを拡張するための@astrojs/solid-jsフレームワークインテグレーションの使用方法を学習します。
sidebar:
  label: SolidJS
githubIntegrationURL: 'https://github.com/withastro/astro/tree/main/packages/integrations/solid/'
category: renderer
i18nReady: true
---
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';
import Since from '~/components/Since.astro';

この**[Astroインテグレーション][astro-integration]**は、[SolidJS](https://www.solidjs.com/)コンポーネントのレンダリングとクライアントサイドハイドレーションを有効にします。

## インストール

Astroには公式インテグレーションの設定を自動化する`astro add`コマンドが含まれています。お好みに応じて、代わりに[手動でインテグレーションをインストール](#manual-install)することもできます。

`@astrojs/solid-js`をインストールするには、プロジェクトディレクトリから以下を実行し、プロンプトに従ってください。

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npx astro add solid
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm astro add solid
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn astro add solid
  ```
  </Fragment>
</PackageManagerTabs>

問題が発生した場合は、[GitHubで報告](https://github.com/withastro/astro/issues)していただき、以下の手動インストール手順をお試しください。

### 手動インストール

まず、`@astrojs/solid-js`パッケージをインストールします。

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install @astrojs/solid-js
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add @astrojs/solid-js
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add @astrojs/solid-js
  ```
  </Fragment>
</PackageManagerTabs>

ほとんどのパッケージマネージャーは関連するピア依存関係もインストールします。Astroを起動する際に`Cannot find package 'solid-js'`（または類似の）警告が表示される場合は、SolidJSをインストールする必要があります。

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install solid-js
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add solid-js
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add solid-js
  ```
  </Fragment>
</PackageManagerTabs>

次に、`integrations`プロパティを使用して、`astro.config.*`ファイルにインテグレーションを適用します。

```js title="astro.config.mjs" ins={2} ins="solidJs()"
import { defineConfig } from 'astro/config';
import solidJs from '@astrojs/solid-js';

export default defineConfig({
  // ...
  integrations: [solidJs()],
});
```

そして、`tsconfig.json`ファイルに以下のコードを追加します。

```json title="tsconfig.json" ins={5-8}
{
  "extends": "astro/tsconfigs/strict",
  "include": [".astro/types.d.ts", "**/*"],
  "exclude": ["dist"],
  "compilerOptions": {
    "jsx": "preserve",
    "jsxImportSource": "solid-js"
  }
}
```

## はじめに

AstroでSolidJSコンポーネントを使用するには、[UIフレームワークドキュメント][astro-ui-frameworks]をご覧ください。以下について説明しています。

* 📦 フレームワークコンポーネントの読み込み方法
* 💧 クライアントサイドハイドレーションオプション
* 🤝 フレームワークを組み合わせてネストする機会

## 設定

### devtools

<p><Since pkg="@astrojs/solid-js" v="4.2.0" /></p>

`solid()`インテグレーション設定に`devtools: true`を含むオブジェクトを渡し、プロジェクトの依存関係に`solid-devtools`を追加することで、開発時に[Solid DevTools](https://github.com/thetarnav/solid-devtools)を有効にできます。

<PackageManagerTabs>
  <Fragment slot="npm">
  ```sh
  npm install solid-devtools
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```sh
  pnpm add solid-devtools
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```sh
  yarn add solid-devtools
  ```
  </Fragment>
</PackageManagerTabs>

```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import solid from '@astrojs/solid-js';

export default defineConfig({
  // ...
  integrations: [solid({ devtools: true })],
});
```

## オプション

### 複数のJSXフレームワークの組み合わせ

同じプロジェクトで複数のJSXフレームワーク（React、Preact、Solid）を使用している場合、Astroはそれぞれのコンポーネントに対してどのJSXフレームワーク固有の変換を使用するかを決定する必要があります。プロジェクトにJSXフレームワークインテグレーションを1つだけ追加している場合、追加の設定は必要ありません。

`include`（必須）および`exclude`（オプション）設定オプションを使用して、どのファイルがどのフレームワークに属するかを指定します。使用する各フレームワークの`include`にファイルやフォルダの配列を提供します。ワイルドカードを使用して複数のファイルパスを含めることができます。

共通のフレームワークコンポーネントを同じフォルダ（例。`/components/react/`と`/components/solid/`）に配置してincludeの指定を簡単にすることをお勧めしますが、これは必須ではありません。

```js title="astro.config.mjs"
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';
import react from '@astrojs/react';
import svelte from '@astrojs/svelte';
import vue from '@astrojs/vue';
import solid from '@astrojs/solid-js';

export default defineConfig({
  // さまざまな種類のコンポーネントをサポートするために多くのフレームワークを有効にします。
  // 単一のJSXフレームワークのみを使用している場合、`include`は必要ありません！
  integrations: [
    preact({
      include: ['**/preact/*'],
    }),
    react({
      include: ['**/react/*'],
    }),
    solid({
      include: ['**/solid/*', '**/node_modules/@suid/material/**'],
    }),
  ],
});
```

## 使用方法

SolidJSコンポーネントは他の[UIフレームワークコンポーネント](/ja/guides/framework-components/)と同様に使用します。

### Suspenseバウンダリ

過度な設定なしでSolid ResourcesとLazy Componentsをサポートするため、サーバーのみおよびハイドレートコンポーネントは自動的にトップレベルのSuspenseバウンダリでラップされ、[`renderToStringAsync`][solid-render-to-string-async]関数を使用してサーバー上でレンダリングされます。したがって、非同期コンポーネントの周りにトップレベルのSuspenseバウンダリを追加する必要はありません。

例えば、Solidの[`createResource`][solid-create-resource]を使用してサーバー上で非同期リモートデータを取得できます。リモートデータはAstroからの初期サーバーレンダリングHTMLに含まれます。

```tsx
// CharacterName.tsx
function CharacterName() {
  const [name] = createResource(() =>
    fetch('https://swapi.dev/api/people/1')
      .then((result) => result.json())
      .then((data) => data.name)
  );

  return (
    <>
      <h2>Name:</h2>
      {/* Luke Skywalker */}
      <div>{name()}</div>
    </>
  );
}
```

同様に、Solidの[Lazy Components][solid-lazy-components]も解決され、そのHTMLが初期サーバーレンダリングページに含まれます。

非ハイドレート[`client:only`コンポーネント][astro-client-only]は自動的にSuspenseバウンダリでラップされません。

お好みに応じて追加のSuspenseバウンダリを自由に追加してください。

[astro-integration]: /ja/guides/integrations-guide/

[astro-ui-frameworks]: /ja/guides/framework-components/#using-framework-components

[astro-client-only]: /ja/reference/directives-reference/#clientonly

[solid-render-to-string-async]: https://www.solidjs.com/docs/latest/api#rendertostringasync

[solid-create-resource]: https://www.solidjs.com/docs/latest/api#createresource

[solid-lazy-components]: https://www.solidjs.com/docs/latest/api#lazy